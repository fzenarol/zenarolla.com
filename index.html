<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Francisco Zenarolla</title>
  <meta name="description" content="Francisco Zenarolla — resume, projects, and contact." />

  <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0}
    html{scroll-behavior:smooth}

    :root{
      --bg1:#f2f0eb; --bg2:#eae7e1; --ink:#2b2b2b;
      --gold1:#d4af37; --gold2:#ffd700;
      --btn-top:#0a0a0a; --btn-bot:#000000; --btn-border:#000000;
      --btn-hover-top:#161616; --btn-hover-bot:#050505; --btn-hover-border:#1f1f1f;
      --btn-text:#fafafa;
    }

    body{
      font-family:'Inter Tight','Helvetica Neue',Helvetica,Arial,sans-serif;
      color:var(--ink);
      min-height:100vh;
      background:linear-gradient(120deg,var(--bg1),var(--bg2),var(--bg1));
      background-size:400% 400%;
      animation:bgShift 24s ease-in-out infinite;
    }
    @keyframes bgShift{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    .page{display:none;min-height:100vh}
    .page.active{display:flex}

    .hero{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center}
    .container{width:min(800px,92vw);margin-inline:auto}

    h1{
      font-weight:300;font-size:clamp(2.2rem,5.5vw,4rem);letter-spacing:4px;
      margin:0 0 32px 0;opacity:0;transform:translateY(16px);
      transition:opacity 550ms ease,transform 550ms ease;
    }
    body.loaded .home h1{opacity:1;transform:translateY(0)}

    .buttons{
      display:flex;flex-direction:column;gap:14px;align-items:center;justify-content:center;
      opacity:0;transform:translateY(16px);transition:opacity 550ms ease,transform 550ms ease;
    }
    body.loaded .home .buttons{opacity:1;transform:translateY(0)}

    .btn{
      position:relative;display:inline-flex;align-items:center;justify-content:center;
      padding:12px 32px;border-radius:0;
      color:var(--btn-text);text-decoration:none;font-size:1.05rem;font-weight:400;
      text-transform:uppercase;letter-spacing:2.5px;background:linear-gradient(180deg,var(--btn-top),var(--btn-bot));
      border:1px solid var(--btn-border);
      box-shadow:0 1px 0 rgba(255,255,255,.04) inset,0 8px 18px rgba(0,0,0,.35);
      transition:background-color 220ms ease,box-shadow 280ms ease,border-color 220ms ease,transform 140ms ease;
    }
    .btn:hover,.btn:focus-visible{
      outline:none;background:linear-gradient(180deg,var(--btn-hover-top),var(--btn-hover-bot));
      border-color:var(--btn-hover-border);box-shadow:0 1px 0 rgba(255,255,255,.06) inset,0 12px 28px rgba(0,0,0,.4);
      transform:translateY(-1px);
    }
    .btn:active{transform:scale(.99)}

    /* Gold keyline sweep (home buttons only) */
    .btn::before{
      content:"";position:absolute;inset:-2px;border-radius:0;padding:1.5px;opacity:0;pointer-events:none;
      background:linear-gradient(90deg,transparent 0%,var(--gold1) 15%,var(--gold2) 50%,var(--gold1) 85%,transparent 100%);
      background-size:260% 100%;
      -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
      -webkit-mask-composite:xor; mask-composite:exclude;
    }
    @keyframes keylinePass{
      0%{background-position:-150% 0;opacity:0}
      15%{opacity:1}
      85%{opacity:1}
      100%{background-position:150% 0;opacity:0}
    }
    .keyline-sweep::before{animation:keylinePass 1400ms cubic-bezier(.22,.61,.36,1) 1 forwards}

    .page-inner{flex:1;display:flex;align-items:flex-start;justify-content:center;padding:96px 20px 120px}
    .content{width:min(900px,92vw)}
    .content h2{margin:0 0 16px 0;font-weight:500;letter-spacing:.06em;text-transform:uppercase}
    .content p{line-height:1.6;margin:0 0 16px 0}

    /* Back to Home (desktop label, mobile arrow-only) */
    .back-btn{display:inline-flex;align-items:center;justify-content:center;gap:8px}
    .back-btn .arrow{font-size:1.2rem;line-height:1}

    @media (min-width:769px){
      .buttons{flex-direction:row;gap:24px}
      .btn{font-size:1.1rem}
      .back-btn .label{display:inline}
    }
    @media (max-width:768px){
      .home .hero{min-height:100svh}
      .back-btn .label{display:none}
      .back-btn .arrow{font-size:1.4rem}
      .back-btn{padding:10px 14px}
    }

    /* Typing effect */
    .typing-wrap{white-space:pre-wrap}
    .typing-line{margin:0 0 16px 0}
    .typing-caret{
      display:inline-block;width:1px;height:1em;vertical-align:-0.2em;background:#111;margin-left:2px;
      animation:blink 1s steps(1,end) infinite;
    }
    @keyframes blink{50%{opacity:0}}

    /* Hide original content while typing, then fade it back in */
    .content.is-typing > *{visibility:hidden}
    .content.revealed{animation:fadeIn 220ms ease-out}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
  </style>
</head>
<body>

  <!-- HOME -->
  <section id="home" class="page home">
    <div class="hero">
      <div class="container">
        <h1>Francisco Zenarolla</h1>
        <div class="buttons">
          <a class="btn" href="#/resume">Resume</a>
          <a class="btn" href="#/projects">Projects</a>
          <a class="btn" href="#/contact">Contact</a>
        </div>
      </div>
    </div>
  </section>

  <!-- RESUME -->
  <section id="resume" class="page">
    <div class="page-inner">
      <div class="content">
        <h2>Resume</h2>
        <p>Add your PDF link or an embedded viewer here.</p>
        <a class="btn back-btn" href="#/"><span class="arrow">←</span><span class="label">Back to Home</span></a>
      </div>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects" class="page">
    <div class="page-inner">
      <div class="content">
        <h2>Projects</h2>
        <p>Showcase 3–6 projects with short descriptions and links.</p>
        <a class="btn back-btn" href="#/"><span class="arrow">←</span><span class="label">Back to Home</span></a>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="page">
    <div class="page-inner">
      <div class="content">
        <h2>Contact</h2>
        <p>Email: <a href="mailto:francisco@zenarolla.com">francisco@zenarolla.com</a></p>
        <a class="btn back-btn" href="#/"><span class="arrow">←</span><span class="label">Back to Home</span></a>
      </div>
    </div>
  </section>

  <script>
    // --- Simple hash router ---
    const routes = ['/', '/resume', '/projects', '/contact'];

    function currentRoute(){
      const raw = location.hash.replace(/^#/, '');
      if (!raw || raw === '/' || raw === '') return '/';
      return raw.startsWith('/') ? raw : '/' + raw;
    }

    function showRoute(route){
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      const id = route === '/' ? 'home' : route.slice(1);
      const page = document.getElementById(id) || document.getElementById('home');
      page.classList.add('active');
      if (route === '/') { startSweepLoop(); }
      else { stopSweepLoop(); startTypingForPage(id); }
    }

    window.addEventListener('hashchange', () => showRoute(currentRoute()));
    document.addEventListener('DOMContentLoaded', () => {
      document.body.classList.add('loaded');
      if (!routes.includes(currentRoute())) location.hash = '#/';
      showRoute(currentRoute());
      cacheOriginalContent();
    });

    // --- Gold sweep on HOME only (every 4s) ---
    let sweepInterval = null;
    function sweepOnce() {
      const buttons = document.querySelectorAll('.home .btn');
      buttons.forEach(btn => {
        btn.classList.remove('keyline-sweep');
        void btn.offsetWidth; // reset
        btn.classList.add('keyline-sweep');
      });
      setTimeout(() => {
        document.querySelectorAll('.home .btn').forEach(b => b.classList.remove('keyline-sweep'));
      }, 2000);
    }
    function startSweepLoop(){
      if (sweepInterval) return;
      const isMobile = window.innerWidth <= 768;
      setTimeout(() => { if (location.hash === '' || location.hash === '#/') sweepOnce(); }, isMobile ? 1800 : 2200);
      sweepInterval = setInterval(() => {
        if (location.hash === '' || location.hash === '#/') sweepOnce();
      }, 4000);
    }
    function stopSweepLoop(){
      if (sweepInterval) { clearInterval(sweepInterval); sweepInterval = null; }
    }

    // --- Typing effect on inner pages ---
    const originalContent = new Map();

    function cacheOriginalContent(){
      ['resume','projects','contact'].forEach(id => {
        const content = document.querySelector('#' + id + ' .content');
        if (content) originalContent.set(id, content.innerHTML);
      });
    }

    let typingAbortController = null;

    async function startTypingForPage(id){
      const content = document.querySelector('#' + id + ' .content');
      if (!content) return;

      // If already typing, abort previous
      if (typingAbortController) typingAbortController.abort();
      typingAbortController = new AbortController();
      const { signal } = typingAbortController;

      // Reset to original markup to ensure clean slate
      const html = originalContent.get(id) || content.innerHTML;

      // Build a mirror "typing" structure using plain text lines (h2, p), then reveal real content after
      const blocks = Array.from(content.querySelectorAll(':scope > h2, :scope > p'));
      const backBtn = content.querySelector(':scope > .back-btn') || content.querySelector(':scope > a.back-btn');

      // Hide real content while typing
      content.classList.add('is-typing');

      // Insert typing wrapper at the top
      let typingWrap = content.querySelector('.typing-wrap');
      if (typingWrap) typingWrap.remove();
      typingWrap = document.createElement('div');
      typingWrap.className = 'typing-wrap';
      content.prepend(typingWrap);

      // Create mirror lines for each block
      const mirrors = blocks.map((el) => {
        const tag = el.tagName.toLowerCase();
        const mirror = document.createElement(tag);
        mirror.className = 'typing-line';
        typingWrap.appendChild(mirror);
        return { src: el, mirror };
      });

      // Also add a caret span to the last line
      let caret = document.createElement('span');
      caret.className = 'typing-caret';
      // caret appended as we type

      // Typing speed (slightly slower on mobile)
      const perChar = (window.innerWidth <= 768) ? 22 : 16; // ms per char
      const perLinePause = 120; // pause between lines

      try {
        for (let i = 0; i < mirrors.length; i++){
          if (signal.aborted) return;
          const { src, mirror } = mirrors[i];

          // Use innerText so layout feels natural; links will be restored when real content returns
          const text = src.innerText || src.textContent || '';
          await typeTextInto(mirror, text, perChar, signal);

          // Append caret to current line while typing next line
          if (i === mirrors.length - 1) {
            mirror.appendChild(caret);
          } else {
            await sleep(perLinePause, signal);
          }
        }

        // Small final pause, then reveal real content & back button
        await sleep(150, signal);

      } catch (e) {
        // aborted or error — just fall through to reveal
      } finally {
        // Clean up typing layer and reveal real content (with links intact)
        typingWrap.remove();
        content.classList.remove('is-typing');
        // Force a tiny fade-in to make the reveal feel intentional
        content.classList.add('revealed');
        setTimeout(()=>content.classList.remove('revealed'), 250);
      }
    }

    function sleep(ms, signal){
      return new Promise((res, rej)=>{
        const t = setTimeout(res, ms);
        if (signal) signal.addEventListener('abort', ()=>{ clearTimeout(t); rej(new DOMException('Aborted','AbortError')); }, { once:true });
      });
    }

    function typeTextInto(el, text, perChar, signal){
      return new Promise((resolve, reject) => {
        el.textContent = '';
        let i = 0;
        function step(){
          if (signal && signal.aborted) return reject(new DOMException('Aborted','AbortError'));
          if (i <= text.length){
            el.textContent = text.slice(0, i);
            i++;
            setTimeout(step, perChar);
          } else {
            resolve();
          }
        }
        step();
      });
    }
  </script>
</body>
</html>
